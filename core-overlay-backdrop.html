<!--
    @license
    Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
    This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
    The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
    The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
    Code distributed by Google as part of the polymer project is also
    subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">

<style is="x-style">

  * {
    --core-overlay-backdrop-background-color: #000;
  }

</style>

<dom-module id="core-overlay-backdrop">

  <style>

    :host {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: var(--core-overlay-backdrop-background-color);
      opacity: 0;
      transition: opacity 0.2s;

      mixin(--core-overlay-backdrop);
    }

    :host(.core-opened) {
      opacity: 0.6;

      mixin(--core-overlay-backdrop-opened);
    }

  </style>

</dom-module>

<script>

(function() {

  Polymer({

    is: 'core-overlay-backdrop',

    enableCustomStyleProperties: true,

    prepare: function(zIndex) {
      if (!this.parentNode) {
        Polymer.dom(document.body).appendChild(this);
        this.style.zIndex = zIndex;
      }
    },

    open: function() {
      this.classList.add('core-opened');
    },

    close: function() {
      this.classList.remove('core-opened');
    },

    complete: function() {
      if (this.parentNode) {
        Polymer.dom(this.parentNode).removeChild(this);
      }
    }

  });

})();

</script>
